<!DOCTYPE html>
<html lang="en" ng-app="xschiqApp">
<head>
  <meta charset="UTF-8">
  <title>Xschiq – AI Precision Psychiatry</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; background: #f0f2f5; margin: 0; }
    nav { background: #212529; color: white; padding: 1rem; display: flex; justify-content: space-between; }
    nav a { color: white; margin-left: 1rem; cursor: pointer; text-decoration: none; }
    .container { max-width: 800px; margin: 2rem auto; padding: 1rem; }
    input, textarea, button { width: 100%; margin-bottom: 1rem; padding: 0.7rem; font-size: 1rem; }
    textarea { resize: vertical; }
    .jira-ticket { background: #fff; padding: 1rem; margin: 1rem 0; border-left: 4px solid #0d6efd; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
    .ticket-actions { display: flex; justify-content: space-between; align-items: center; }
    footer { text-align: center; font-size: 0.9rem; color: #888; padding: 1rem; }
  </style>
</head>
<body ng-controller="MainController">
  <nav>
    <strong>Xschiq</strong>
    <div>
      <a ng-click="setView('home')">Home</a>
      <a ng-click="setView('mission')">Mission</a>
      <a ng-click="setView('market')">Market</a>
      <a ng-click="setView('contact')">Contact</a>
      <a ng-click="setView('login')">Login</a>
    </div>
  </nav>

  <div class="container">
    <section ng-show="view === 'home'">
      <h2>Welcome to Xschiq</h2>
      <p>AI-powered tools to predict responses to psychiatric medications using multimodal data: EEG, genomics, and behavior.</p>
    </section>

    <section ng-show="view === 'mission'">
      <h2>Our Mission</h2>
      <p>Xschiq is building the future of personalized psychiatry. We help clinicians use AI for better patient outcomes.</p>
    </section>

    <section ng-show="view === 'market'">
      <h2>Market Opportunity</h2>
      <p>The mental health AI market is growing rapidly. Xschiq is positioned at the intersection of psychiatry, AI, and data science.</p>
    </section>

    <section ng-show="view === 'contact'">
      <h2>Contact</h2>
      <p>Netanel Stern – Founder</p>
      <p>Email: <a href="mailto:nsh531@gmail.com">nsh531@gmail.com</a></p>
      <p><a href="https://linkedin.com">LinkedIn</a> | <a href="https://twitter.com">Twitter</a></p>
    </section>

    <section ng-show="view === 'login'">
      <h2>Login</h2>
      <input type="text" placeholder="Username" ng-model="login.username">
      <input type="password" placeholder="Password" ng-model="login.password">
      <button ng-click="doLogin()">Login</button>

      <div ng-if="loggedIn">
        <h3>Create JIRA-Style Ticket</h3>
        <form ng-submit="addTicket()">
          <input type="text" ng-model="newTicket.title" placeholder="Issue title" required>
          <textarea ng-model="newTicket.description" placeholder="Issue description" required></textarea>
          <button type="submit">Add Ticket</button>
        </form>

        <div class="jira-ticket" ng-repeat="t in tickets">
          <div class="ticket-actions">
            <div>
              <strong>{{t.title}}</strong><br>
              <small>{{t.description}}</small>
            </div>
            <button ng-click="downloadTicket(t)">Save JSON</button>
          </div>
        </div>

        <button ng-click="logout()">Logout</button>
      </div>
    </section>
  </div>

  <footer>&copy; 2025 Xschiq. All rights reserved.</footer>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script>
    angular.module('xschiqApp', [])
      .controller('MainController', ['$scope', function($scope) {
        $scope.view = 'home';
        $scope.setView = view => $scope.view = view;

        $scope.login = {};
        $scope.loggedIn = false;
        $scope.newTicket = {};
        $scope.tickets = [];

        const STORAGE_KEY = "xschiq_tickets";

        $scope.doLogin = function () {
          if ($scope.login.username === 'admin' && $scope.login.password === 'xschiq') {
            $scope.loggedIn = true;
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) $scope.tickets = JSON.parse(saved);
          } else {
            alert("Invalid credentials.");
          }
        };

        $scope.logout = function () {
          $scope.loggedIn = false;
          $scope.login = {};
          $scope.tickets = [];
        };

        $scope.addTicket = function () {
          const ticket = {
            id: 'XSQ-' + Math.floor(100 + Math.random() * 900),
            title: $scope.newTicket.title,
            description: $scope.newTicket.description,
            created: new Date().toISOString()
          };
          $scope.tickets.push(ticket);
          localStorage.setItem(STORAGE_KEY, JSON.stringify($scope.tickets));
          $scope.newTicket = {};
        };

        $scope.downloadTicket = function (ticket) {
          const blob = new Blob([JSON.stringify(ticket, null, 2)], { type: "application/json" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = `${ticket.id || 'ticket'}.json`;
          a.click();
          URL.revokeObjectURL(url);
        };
      }]);
  </script>
</body>
</html>
